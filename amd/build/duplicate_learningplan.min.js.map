{"version":3,"file":"duplicate_learningplan.min.js","sources":["../src/duplicate_learningplan.js"],"sourcesContent":["import * as Ajax from 'core/ajax';\n\nexport const init = (learningid) => {\n\n    const btnduplicateplan = document.querySelector('#duplicate_learning_plan');\n    const duplicate_courses = document.querySelector('#duplicate_courses');\n    const copy_courses = document.querySelector('#copy_courses');\n    if (btnduplicateplan) {\n        btnduplicateplan.addEventListener('click', e => {\n            e.preventDefault();\n            const learningname = document.querySelector('#learningname');\n            if (!learningname.validity.valid) {\n                learningname.reportValidity();\n                return;\n            }\n            const learningshortname = document.querySelector('#learningshortname');\n            if (!learningshortname.validity.valid) {\n                learningshortname.reportValidity();\n                return;\n            }\n            const desc_plan = document.querySelector('#id_desc_planeditable');\n            const learningimage = document.querySelector('#id_learningplan_image');\n            const duplicate_users = document.querySelector('#duplicate_users');\n            const promise = Ajax.call([{\n                methodname: 'local_sc_learningplans_duplicate_learning_plan',\n                args: {\n                    learningid: learningid,\n                    learningshortname: learningshortname.value,\n                    learningname: learningname.value,\n                    fileimage: learningimage.value,\n                    description: desc_plan.innerHTML,\n                    courses: duplicate_courses.checked,\n                    copycourses: copy_courses.checked,\n                    users: duplicate_users.checked,\n                }\n            },]);\n\n            promise[0].done(function (response) {\n                window.console.log('local_sc_learningplans_duplicate_learning_plan', response);\n                location.href = '/local/sc_learningplans/index.php';\n            }).fail(function (response) {\n                window.console.error(response);\n            });\n        });\n    }\n    //\n    if (duplicate_courses && copy_courses) {\n        duplicate_courses.addEventListener('change', e => {\n            if (e.target.checked) {\n                copy_courses.disabled = true;\n            } else {\n                copy_courses.disabled = false;\n            }\n        });\n        copy_courses.addEventListener('change', e => {\n            if (e.target.checked) {\n                duplicate_courses.disabled = true;\n            } else {\n                duplicate_courses.disabled = false;\n            }\n        });\n    }\n};"],"names":["learningid","btnduplicateplan","document","querySelector","duplicate_courses","copy_courses","addEventListener","e","preventDefault","learningname","validity","valid","learningshortname","desc_plan","learningimage","duplicate_users","Ajax","call","methodname","args","value","fileimage","description","innerHTML","courses","checked","copycourses","users","done","response","window","console","log","location","href","fail","error","reportValidity","target","disabled"],"mappings":"23CAEoB,SAACA,gBAEXC,iBAAmBC,SAASC,cAAc,4BAC1CC,kBAAoBF,SAASC,cAAc,sBAC3CE,aAAeH,SAASC,cAAc,iBACxCF,kBACAA,iBAAiBK,iBAAiB,SAAS,SAAAC,GACvCA,EAAEC,qBACIC,aAAeP,SAASC,cAAc,oBACvCM,aAAaC,SAASC,WAIrBC,kBAAoBV,SAASC,cAAc,yBAC5CS,kBAAkBF,SAASC,WAI1BE,UAAYX,SAASC,cAAc,yBACnCW,cAAgBZ,SAASC,cAAc,0BACvCY,gBAAkBb,SAASC,cAAc,oBAC/Ba,KAAKC,KAAK,CAAC,CACvBC,WAAY,iDACZC,KAAM,CACFnB,WAAYA,WACZY,kBAAmBA,kBAAkBQ,MACrCX,aAAcA,aAAaW,MAC3BC,UAAWP,cAAcM,MACzBE,YAAaT,UAAUU,UACvBC,QAASpB,kBAAkBqB,QAC3BC,YAAarB,aAAaoB,QAC1BE,MAAOZ,gBAAgBU,YAIvB,GAAGG,MAAK,SAAUC,UACtBC,OAAOC,QAAQC,IAAI,iDAAkDH,UACrEI,SAASC,KAAO,uCACjBC,MAAK,SAAUN,UACdC,OAAOC,QAAQK,MAAMP,kBAxBrBjB,kBAAkByB,sBALlB5B,aAAa4B,oBAkCrBjC,mBAAqBC,eACrBD,kBAAkBE,iBAAiB,UAAU,SAAAC,GACrCA,EAAE+B,OAAOb,QACTpB,aAAakC,UAAW,EAExBlC,aAAakC,UAAW,KAGhClC,aAAaC,iBAAiB,UAAU,SAAAC,GAChCA,EAAE+B,OAAOb,QACTrB,kBAAkBmC,UAAW,EAE7BnC,kBAAkBmC,UAAW"}