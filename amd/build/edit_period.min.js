define("local_sc_learningplans/edit_period",["exports","core/ajax","core/str","core/notification"],(function(_exports,Ajax,Str,notification){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,Ajax=_interopRequireWildcard(Ajax),Str=_interopRequireWildcard(Str),notification=_interopRequireWildcard(notification);_exports.init=learningid=>{const btnsavenewperiod=document.querySelector("#save_new_period");btnsavenewperiod&&btnsavenewperiod.addEventListener("click",(e=>{e.preventDefault();const periodname=document.querySelector("#name_new_period"),periodvigency=document.querySelector("#vigency_new_period");if(!periodname.validity.valid)return void periodname.reportValidity();if(!periodvigency.validity.valid)return void periodvigency.reportValidity();Ajax.call([{methodname:"local_sc_learningplans_addperiod_learning_plan",args:{learningplanid:learningid,name:periodname.value,vigency:periodvigency.value}}])[0].done((function(response){window.console.log("local_sc_learningplans_addperiod_learning_plan",response),window.location.reload(!0)})).fail((function(response){window.console.error(response)}))}));const btndeleteperiod=document.querySelectorAll("#btndeleteperiod");if(btndeleteperiod)for(const el of btndeleteperiod){const titleconfirm=Str.get_string("titleconfirm","local_sc_learningplans"),msgconfirm=Str.get_string("msgconfirm_period","local_sc_learningplans"),yesconfirm=Str.get_string("yesconfirm","local_sc_learningplans");el.addEventListener("click",(e=>{e.preventDefault();const periodid=e.target.parentElement.getAttribute("period-id");notification.saveCancel(titleconfirm,msgconfirm,yesconfirm,(()=>{callDeletePeriod(learningid,periodid)}))}))}const editperiod=document.querySelectorAll(".modalEditPeriod");if(editperiod)for(const btnedit of editperiod){let periodid=btnedit.getAttribute("data-id");document.querySelector("#save_edit_period_"+periodid).addEventListener("click",(e=>{window.console.log(e);let nameperiod=document.querySelector("#name_new_period_"+periodid).value,vigencyperiod=document.querySelector("#vigency_new_period_"+periodid).value;callEditPeriod(periodid,nameperiod,vigencyperiod)}))}};const callDeletePeriod=(learningid,periodid)=>{learningid=parseInt(learningid),periodid=parseInt(periodid);Ajax.call([{methodname:"local_sc_learningplans_delete_period_learning_plan",args:{learningplan:learningid,periodid:periodid}}])[0].done((function(response){window.console.log("local_sc_learningplans_delete_period_learning_plan",response),window.location.reload(!0)})).fail((function(response){window.console.error(response)}))},callEditPeriod=(periodid,nameperiod,vigencyperiod)=>{periodid=parseInt(periodid);Ajax.call([{methodname:"local_sc_learningplans_edit_period_learning_plan",args:{periodid:periodid,nameperiod:nameperiod,vigency:vigencyperiod}}])[0].done((function(response){window.console.log("local_sc_learningplans_edit_period_learning_plan",response),window.location.reload(!0)})).fail((function(response){window.console.error(response)}))}}));

//# sourceMappingURL=edit_period.min.js.map