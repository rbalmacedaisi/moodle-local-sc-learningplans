{"version":3,"file":"manage_courses.min.js","sources":["../src/manage_courses.js"],"sourcesContent":["import * as notification from 'core/notification';\nimport * as Str from 'core/str';\nimport * as Ajax from 'core/ajax';\n\nexport const init = (learningplanid) => {\n    deleteCourseAction(learningplanid);\n    addCoursePeriodAction(learningplanid);\n    addRequiredAction(learningplanid);\n    addOptionalAction(learningplanid);\n    changeOptionalToRequiredAction(learningplanid);\n\n    updateCoursePositionAction();\n\n    actionAddCourseRelations();\n};\n\nlet actionAddCourseRelations = () => {\n    const allBtn = document.querySelectorAll('#btnAddRelationCourse');\n    allBtn.forEach(element => {\n        element.addEventListener('click', () => {\n            const recordid = element.getAttribute('course-record-id');\n            window.lastRecordId = recordid;\n            callGetPossibleRelations(recordid);\n        });\n    });\n    const allRemoveBtn = document.querySelectorAll('#btnDeleteRelationCourse');\n    allRemoveBtn.forEach(element => {\n        element.addEventListener('click', () => {\n            const recordid = element.getAttribute('course-record-id');\n            window.lastRecordId = recordid;\n            callGetPossibleRelations(recordid, true);\n        });\n    });\n\n    const closerelation = document.querySelector('#closerelation');\n    if (closerelation) {\n        closerelation.addEventListener('click', () => {\n            const modal = document.getElementById('coursesRelatedModal');\n            modal.classList.remove('show');\n            modal.style.display = 'none';\n        });\n    }\n\n    const addrelation = document.querySelector('#addrelation');\n    if (addrelation) {\n        addrelation.addEventListener('click', () => {\n            const select = document.querySelector('#selectCourseToRelated');\n            if (select) {\n                const selectedOptions = select.selectedOptions;\n                const selectedValues = [];\n                for (let i = 0; i < selectedOptions.length; i++) {\n                    selectedValues.push(selectedOptions[i].value);\n                }\n                const records = selectedValues.join(',');\n                const recordid = window.lastRecordId;\n                if (window.getToRemove) {\n                    callRemoveRelations(recordid, records);\n                } else {\n                    callAddRelations(recordid, records);\n                }\n            }\n        });\n    }\n\n    const delcloserelation = document.querySelector('#delcloserelation');\n    if (delcloserelation) {\n        delcloserelation.addEventListener('click', () => {\n            const modal = document.getElementById('coursesDelRelatedModal');\n            modal.classList.remove('show');\n            modal.style.display = 'none';\n        });\n    }\n\n    const delrelation = document.querySelector('#delrelation');\n    if (delrelation) {\n        delrelation.addEventListener('click', () => {\n            const select = document.querySelector('#selectCourseToDelRelated');\n            if (select) {\n                const selectedOptions = select.selectedOptions;\n                const selectedValues = [];\n                for (let i = 0; i < selectedOptions.length; i++) {\n                    selectedValues.push(selectedOptions[i].value);\n                }\n                const records = selectedValues.join(',');\n                const recordid = window.lastRecordId;\n                callRemoveRelations(recordid, records);\n            }\n        });\n    }\n};\n\nconst callRemoveRelations = (recordid, records) => {\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_del_course_relations',\n        args: {\n            recordid,\n            records,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_del_course_relations', response);\n        location.reload();\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callAddRelations = (recordid, records) => {\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_add_course_relations',\n        args: {\n            recordid,\n            records,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_add_course_relations', response);\n        location.reload();\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callGetPossibleRelations = (recordid, getToRemove = false) => {\n    recordid = parseInt(recordid);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_get_possible_relations',\n        args: {\n            recordid,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_get_possible_relations', response);\n        window.getToRemove = getToRemove;\n        let dataCourses = response.courses;\n        let selectCourses;\n        let modal;\n        if (getToRemove) {\n            modal = document.getElementById('coursesDelRelatedModal');\n            dataCourses = response.current;\n            selectCourses = document.querySelector('#selectCourseToDelRelated');\n        }\n        else {\n            modal = document.getElementById('coursesRelatedModal');\n            selectCourses = document.querySelector('#selectCourseToRelated');\n        }\n        selectCourses.innerHTML = '';\n        dataCourses.forEach(element => {\n            const newElement = document.createElement(\"option\");\n            newElement.value = element.recordid;\n            newElement.append(element.coursename);\n            selectCourses.append(newElement);\n        });\n\n        modal.classList.add('show');\n        modal.style.display = 'block';\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nlet deleteCourseAction = (learningplanid) => {\n    const deleteBtns = document.querySelectorAll('#btndeletecourse');\n    if (deleteBtns) {\n        const titleconfirm = Str.get_string('titleconfirm', 'local_sc_learningplans');\n        const msgconfirm = Str.get_string('msgconfirm_course', 'local_sc_learningplans');\n        const yesconfirm = Str.get_string('yesconfirm', 'local_sc_learningplans');\n        for (const el of deleteBtns) {\n            el.addEventListener('click', e => {\n                e.preventDefault();\n                const course_record_id = el.getAttribute('course-record-id');\n                const isrequired = el.getAttribute('course-required');\n                notification.saveCancel(titleconfirm, msgconfirm, yesconfirm, () => {\n                    callDeleteCourse(learningplanid, course_record_id, isrequired);\n                });\n            });\n        }\n    }\n};\n\nlet addCoursePeriodAction = (learningplanid) => {\n    const btnaddcourses = document.querySelector('#addcourses');\n    if (btnaddcourses) {\n        btnaddcourses.addEventListener('click', e => {\n            e.preventDefault();\n            const courseselected = document.getElementById('selectAddCourseToLearningPlanPeriod').selectedOptions;\n            const periodselected = document.getElementById('selectPeriodToLearningPlan').value;\n            const creditselected = -1;\n            let isrequired = 0;\n            if (document.getElementById('required').checked) {\n                isrequired = 1;\n            } else {\n                isrequired = 0;\n            }\n            if (courseselected) {\n                const datacourses = Array.prototype.slice.call(courseselected);\n                const courseid = datacourses.map(select => select.value).join(',');\n                callAddCourse(learningplanid, periodselected, courseid, isrequired, creditselected);\n            }\n        });\n    }\n};\n\nlet addRequiredAction = (learningplanid) => {\n    const btnaddrequired = document.querySelector('#addrequired');\n    if (btnaddrequired) {\n        btnaddrequired.addEventListener('click', e => {\n            e.preventDefault();\n            const courseselected = document.getElementById('selectAddCourseToLearningPlan').selectedOptions;\n            if (courseselected) {\n                const datacourses = Array.prototype.slice.call(courseselected);\n                const courseid = datacourses.map(select => select.value).join(',');\n                callAddCourse(learningplanid, null, courseid, 1, -1);\n            }\n        });\n    }\n};\n\nlet addOptionalAction = (learningplanid) => {\n    const btnaddooptional = document.querySelector('#addOptional');\n    if (btnaddooptional) {\n        btnaddooptional.addEventListener('click', e => {\n            e.preventDefault();\n            const courseselected = document.getElementById('selectAddCourseOptionalToLearningPlan').selectedOptions;\n            if (courseselected) {\n                const datacourses = Array.prototype.slice.call(courseselected);\n                const courseid = datacourses.map(select => select.value).join(',');\n                callAddCourse(learningplanid, null, courseid, 0, -1);\n            }\n        });\n    }\n};\n\nlet changeOptionalToRequiredAction = (learningplanid) => {\n    const addoptionalrequired = document.querySelectorAll('#addoptional_required');\n    if (addoptionalrequired) {\n        const titleconfirm = Str.get_string('titleconfirmmove', 'local_sc_learningplans');\n        const yesconfirm = Str.get_string('yesmmoveconfirm', 'local_sc_learningplans');\n        for (const add of addoptionalrequired) {\n            const coursename = add.getAttribute('cname');\n            const msgconfirm = Str.get_string('msgconfirm_mmove', 'local_sc_learningplans', { cname: coursename });\n            add.addEventListener('click', e => {\n                e.preventDefault();\n                const course_record_id = add.getAttribute('course-record-id');\n                const credits = add.getAttribute('credits') ?? -1;\n                const periodid = add.getAttribute('periodid') ?? null;\n                if (course_record_id) {\n                    const recordid = course_record_id;\n                    notification.saveCancel(titleconfirm, msgconfirm, yesconfirm, () => {\n                        callDeleteCourse(learningplanid, recordid, 0, false, credits, periodid, add.getAttribute('course-id'));\n                    });\n                }\n            });\n        }\n    }\n};\n\n\nconst callUpdateCourse = (learningid, courseorder, periodid = null, reload = true) => {\n    learningid = parseInt(learningid);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_update_required_learning_courses',\n        args: {\n            learningplan: learningid,\n            courseorder,\n            periodid\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_update_required_learning_courses', response);\n        if(reload) {\n            location.reload();\n        }\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callAddCourse = (learningid, periodid, courseid, isrequired, credits) => {\n    learningid = parseInt(learningid);\n    isrequired = parseInt(isrequired);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_save_learning_course',\n        args: {\n            learningplan: learningid,\n            periodid: periodid,\n            courseid,\n            required: isrequired,\n            credits: credits,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_save_learning_course', response);\n        location.reload();\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callDeleteCourse = (\n    learningid, recordid, isrequired, notaddingcourse = true, credits = -1, periodid = null, courseid = null\n) => {\n    learningid = parseInt(learningid);\n    recordid = parseInt(recordid);\n    isrequired = parseInt(isrequired);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_delete_learning_course',\n        args: {\n            learningplan: learningid,\n            courseid: recordid,\n            required: isrequired,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_delete_learning_course', response);\n        if (notaddingcourse) {\n            location.reload();\n        }\n        else {\n            callAddCourse(learningid, periodid, courseid, 1, credits);\n        }\n\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nlet items = document.querySelectorAll('.list-courses-required');\nlet itemsPeriod = document.querySelectorAll('.tab-pane .list-courses-required-period');\nlet containercourses = document.querySelectorAll('.coursesrequired');\n\nconst updateCoursePositionAction = () => {\n    const btnupdatecourseorder = document.querySelector('#updatecourseorder');\n\n    items.forEach(function (item) {\n        item.addEventListener('dragstart', handleDragStart, false);\n        item.addEventListener('dragenter', handleDragEnter, false);\n        item.addEventListener('dragover', handleDragOver, false);\n        item.addEventListener('dragleave', handleDragLeave, false);\n        item.addEventListener('drop', handleDrop, false);\n        item.addEventListener('dragend', handleDragEnd, false);\n    });\n\n    itemsPeriod.forEach(function (item) {\n        item.addEventListener('dragstart', handleDragStart, false);\n        item.addEventListener('dragenter', handleDragEnter, false);\n        item.addEventListener('dragover', handleDragOver, false);\n        item.addEventListener('dragleave', handleDragLeave, false);\n        item.addEventListener('drop', handleDrop, false);\n        item.addEventListener('dragend', handleDragEnd, false);\n    });\n\n    containercourses.forEach(function (contelement) {\n        contelement.addEventListener('dragenter', handleDragEnter, false);\n        contelement.addEventListener('dragleave', handleDragLeave, false);\n        contelement.addEventListener('dragover', handleDragOver, false);\n        contelement.addEventListener('drop', handleDropNew, false);\n    });\n\n    if (btnupdatecourseorder) {\n        const lpid = document.querySelector(\".coursesrequired\");\n        let learningplanid = lpid.getAttribute('learningplanid');\n        btnupdatecourseorder.addEventListener('click', e => {\n            e.preventDefault();\n            clickUpdateCourses(learningplanid);\n        });\n    }\n\n    const btnupdatecourseperiodorder = document.querySelectorAll('#courseOrderInPeriod');\n    for (const btnupdate of btnupdatecourseperiodorder) {\n        btnupdate.addEventListener('click', e => {\n            e.preventDefault();\n            let periodid = btnupdate.attributes.periodid.value;\n            let lpid = btnupdate.attributes.lpid.value;\n            clickUpdateCoursePeriod(lpid, periodid);\n        });\n    }\n};\n\nconst clickUpdateCoursePeriod = (lpid, periodid, reload) => {\n    const itemsPeriod = document.querySelectorAll(`li[lpid=\"${lpid}\"][periodid=\"${periodid}\"]`);\n    const courseData = [];\n    itemsPeriod.forEach(function (item) {\n        let listRecordID = item.attributes.datacourse.value;\n        let listCoursePosition = item.attributes.poscourse.value;\n        let listCourseID = item.attributes.courseid.value;\n        courseData.push({\n            recordid: listRecordID.replace('courses[', '').replace(']', ''),\n            position: listCoursePosition,\n            courseid: listCourseID,\n        });\n    });\n    const coursePosition = [];\n    courseData.forEach((index) => {\n        coursePosition.push({\n            recordid: index.recordid,\n            courseid: index.courseid,\n            position: index.position,\n            periodid: index.periodid\n        });\n    });\n    callUpdateCourse(lpid, coursePosition, periodid, reload);\n};\n\nconst clickUpdateCourses = (learningplanid) => {\n    const courseData = [];\n    items.forEach(function (item) {\n        let listRecordID = item.attributes.datacourse.value;\n        let listCoursePosition = item.attributes.poscourse.value;\n        let listCourseID = item.attributes.courseid.value;\n        courseData.push({\n            recordid: listRecordID.replace('courses[', '').replace(']', ''),\n            position: listCoursePosition,\n            courseid: listCourseID,\n        });\n    });\n\n    const coursePosition = [];\n    courseData.forEach((index) => {\n        coursePosition.push({\n            recordid: index.recordid,\n            courseid: index.courseid,\n            position: index.position,\n            periodid: index.periodid\n        });\n    });\n    callUpdateCourse(learningplanid, coursePosition);\n};\n\nvar dragSrcEl = null;\n\n/**\n *\n * @param {*} e\n */\nfunction handleDragStart(e) {\n    this.style.opacity = '0.4';\n\n    dragSrcEl = this;\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.innerHTML);\n}\n\n/**\n *\n * @param {*} e\n */\nfunction handleDragOver(e) {\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n\n    e.dataTransfer.dropEffect = 'move';\n\n    return false;\n}\n\n/**\n *\n */\nfunction handleDragEnter() {\n    this.classList.add('over');\n}\n\n/**\n *\n */\nfunction handleDragLeave() {\n    this.classList.remove('over');\n}\n\n/**\n *\n * @param {*} e\n */\nfunction handleDrop(e) {\n    if (e.stopPropagation) {\n        e.stopPropagation(); // stops the browser from redirecting.\n    }\n    if (dragSrcEl != this) {\n        dragSrcEl.innerHTML = this.innerHTML;\n        this.innerHTML = e.dataTransfer.getData('text/html');\n\n        let itemToReplaceAttr = this.attributes[\"datacourse\"].value;\n        let itemToReplaceCourseAttr = this.attributes[\"courseid\"].value;\n        let draggedItemAttr = dragSrcEl.attributes[\"datacourse\"].value;\n        let draggedItemCourseAttr = dragSrcEl.attributes[\"courseid\"].value;\n        this.setAttribute(\"datacourse\", draggedItemAttr);\n        this.setAttribute(\"courseid\", draggedItemCourseAttr);\n        dragSrcEl.setAttribute(\"datacourse\", itemToReplaceAttr);\n        dragSrcEl.setAttribute(\"courseid\", itemToReplaceCourseAttr);\n        const lpid = document.querySelector(\".coursesrequired\");\n        let learningplanid = lpid.getAttribute('learningplanid');\n        let havePeriod = dragSrcEl.attributes['periodid']?.value;\n        if (havePeriod) {\n            const allPeriodsRequired = document.querySelectorAll('.coursesrequired');\n            allPeriodsRequired.forEach(el => {\n                const periodid = el.getAttribute('record-periodid');\n                window.console.log(periodid);\n                clickUpdateCoursePeriod(learningplanid, periodid, false);\n            });\n        } else {\n            clickUpdateCourses(learningplanid);\n        }\n        window.console.log(learningplanid, havePeriod,\n            'Cambiando los cursos draggedItemAttr: ',\n            draggedItemAttr, 'itemToReplaceAttr', itemToReplaceAttr);\n    }\n\n    return false;\n}\n\n/**\n *\n * @param {*} e\n */\nfunction handleDropNew(e) {\n    if (e.stopPropagation) {\n        e.stopPropagation(); // stops the browser from redirecting.\n    }\n    const dragParent = dragSrcEl.parentElement;\n    if (dragParent != e.target) {\n        e.target.append(dragSrcEl);\n    }\n    return false;\n}\n\n/**\n *\n */\nfunction handleDragEnd() {\n    this.style.opacity = '1';\n    items.forEach(function (item) {\n        item.classList.remove('over');\n    });\n    containercourses.forEach(function (item) {\n        item.classList.remove('over');\n    });\n}"],"names":["learningplanid","deleteCourseAction","addCoursePeriodAction","addRequiredAction","addOptionalAction","changeOptionalToRequiredAction","updateCoursePositionAction","actionAddCourseRelations","document","querySelectorAll","forEach","element","addEventListener","recordid","getAttribute","window","lastRecordId","callGetPossibleRelations","closerelation","querySelector","modal","getElementById","classList","remove","style","display","addrelation","select","selectedOptions","selectedValues","i","length","push","value","records","join","getToRemove","callRemoveRelations","callAddRelations","delcloserelation","delrelation","Ajax","call","methodname","args","done","response","console","log","location","reload","fail","error","parseInt","promise","selectCourses","dataCourses","courses","current","innerHTML","newElement","createElement","append","coursename","add","deleteBtns","titleconfirm","Str","get_string","msgconfirm","yesconfirm","el","e","preventDefault","course_record_id","isrequired","notification","saveCancel","callDeleteCourse","btnaddcourses","courseselected","periodselected","checked","courseid","Array","prototype","slice","map","callAddCourse","btnaddrequired","btnaddooptional","addoptionalrequired","cname","credits","periodid","callUpdateCourse","learningid","courseorder","learningplan","required","notaddingcourse","items","itemsPeriod","containercourses","btnupdatecourseorder","item","handleDragStart","handleDragEnter","handleDragOver","handleDragLeave","handleDrop","handleDragEnd","contelement","handleDropNew","clickUpdateCourses","btnupdatecourseperiodorder","btnupdate","attributes","lpid","clickUpdateCoursePeriod","courseData","listRecordID","datacourse","listCoursePosition","poscourse","listCourseID","replace","position","coursePosition","index","dragSrcEl","opacity","this","dataTransfer","effectAllowed","setData","dropEffect","stopPropagation","getData","itemToReplaceAttr","itemToReplaceCourseAttr","draggedItemAttr","draggedItemCourseAttr","setAttribute","havePeriod","_dragSrcEl$attributes","parentElement","target"],"mappings":"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"}