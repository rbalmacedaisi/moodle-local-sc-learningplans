{"version":3,"file":"manage_courses.min.js","sources":["../src/manage_courses.js"],"sourcesContent":["import * as notification from 'core/notification';\nimport * as Str from 'core/str';\nimport * as Ajax from 'core/ajax';\n\nexport const init = (learningplanid) => {\n    deleteCourseAction(learningplanid);\n    addCoursePeriodAction(learningplanid);\n    addRequiredAction(learningplanid);\n    addOptionalAction(learningplanid);\n    changeOptionalToRequiredAction(learningplanid);\n\n    updateCoursePositionAction();\n\n    actionAddCourseRelations();\n};\n\nlet actionAddCourseRelations = () => {\n    const allBtn = document.querySelectorAll('#btnAddRelationCourse');\n    allBtn.forEach(element => {\n        element.addEventListener('click', () => {\n            const recordid = element.getAttribute('course-record-id');\n            window.lastRecordId = recordid;\n            callGetPossibleRelations(recordid);\n        });\n    });\n    const allRemoveBtn = document.querySelectorAll('#btnDeleteRelationCourse');\n    allRemoveBtn.forEach(element => {\n        element.addEventListener('click', () => {\n            const recordid = element.getAttribute('course-record-id');\n            window.lastRecordId = recordid;\n            callGetPossibleRelations(recordid, true);\n        });\n    });\n\n    const closerelation = document.querySelector('#closerelation');\n    if (closerelation) {\n        closerelation.addEventListener('click', () => {\n            const modal = document.getElementById('coursesRelatedModal');\n            modal.classList.remove('show');\n            modal.style.display = 'none';\n        });\n    }\n\n    const addrelation = document.querySelector('#addrelation');\n    if (addrelation) {\n        addrelation.addEventListener('click', () => {\n            const select = document.querySelector('#selectCourseToRelated');\n            if (select) {\n                const selectedOptions = select.selectedOptions;\n                const selectedValues = [];\n                for (let i = 0; i < selectedOptions.length; i++) {\n                    selectedValues.push(selectedOptions[i].value);\n                }\n                const records = selectedValues.join(',');\n                const recordid = window.lastRecordId;\n                if (window.getToRemove) {\n                    callRemoveRelations(recordid, records);\n                } else {\n                    callAddRelations(recordid, records);\n                }\n            }\n        });\n    }\n};\n\nconst callRemoveRelations = (recordid, records) => {\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_del_course_relations',\n        args: {\n            recordid,\n            records,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_del_course_relations', response);\n        location.reload();\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callAddRelations = (recordid, records) => {\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_add_course_relations',\n        args: {\n            recordid,\n            records,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_add_course_relations', response);\n        location.reload();\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callGetPossibleRelations = (recordid, getToRemove = false) => {\n    recordid = parseInt(recordid);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_get_possible_relations',\n        args: {\n            recordid,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_get_possible_relations', response);\n        const selectCourses = document.querySelector('#selectCourseToRelated');\n        selectCourses.innerHTML = '';\n        window.getToRemove = getToRemove;\n        let dataCourses = response.courses;\n        if (getToRemove) {\n            dataCourses = response.current;\n        }\n        dataCourses.forEach(element => {\n            const newElement = document.createElement(\"option\");\n            newElement.value = element.recordid;\n            newElement.append(element.coursename);\n            selectCourses.append(newElement);\n        });\n\n        const modal = document.getElementById('coursesRelatedModal');\n        modal.classList.add('show');\n        modal.style.display = 'block';\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nlet deleteCourseAction = (learningplanid) => {\n    const deleteBtns = document.querySelectorAll('#btndeletecourse');\n    if (deleteBtns) {\n        const titleconfirm = Str.get_string('titleconfirm', 'local_sc_learningplans');\n        const msgconfirm = Str.get_string('msgconfirm_course', 'local_sc_learningplans');\n        const yesconfirm = Str.get_string('yesconfirm', 'local_sc_learningplans');\n        for (const el of deleteBtns) {\n            el.addEventListener('click', e => {\n                e.preventDefault();\n                const course_record_id = el.getAttribute('course-record-id');\n                const isrequired = el.getAttribute('course-required');\n                notification.saveCancel(titleconfirm, msgconfirm, yesconfirm, () => {\n                    callDeleteCourse(learningplanid, course_record_id, isrequired);\n                });\n            });\n        }\n    }\n};\n\nlet addCoursePeriodAction = (learningplanid) => {\n    const btnaddcourses = document.querySelector('#addcourses');\n    if (btnaddcourses) {\n        btnaddcourses.addEventListener('click', e => {\n            e.preventDefault();\n            const courseselected = document.getElementById('selectAddCourseToLearningPlanPeriod').selectedOptions;\n            const periodselected = document.getElementById('selectPeriodToLearningPlan').value;\n            const creditselected = -1;\n            let isrequired = 0;\n            if (document.getElementById('required').checked) {\n                isrequired = 1;\n            } else {\n                isrequired = 0;\n            }\n            if (courseselected) {\n                const datacourses = Array.prototype.slice.call(courseselected);\n                const courseid = datacourses.map(select => select.value).join(',');\n                callAddCourse(learningplanid, periodselected, courseid, isrequired, creditselected);\n            }\n        });\n    }\n};\n\nlet addRequiredAction = (learningplanid) => {\n    const btnaddrequired = document.querySelector('#addrequired');\n    if (btnaddrequired) {\n        btnaddrequired.addEventListener('click', e => {\n            e.preventDefault();\n            const courseselected = document.getElementById('selectAddCourseToLearningPlan').selectedOptions;\n            if (courseselected) {\n                const datacourses = Array.prototype.slice.call(courseselected);\n                const courseid = datacourses.map(select => select.value).join(',');\n                callAddCourse(learningplanid, null, courseid, 1, -1);\n            }\n        });\n    }\n};\n\nlet addOptionalAction = (learningplanid) => {\n    const btnaddooptional = document.querySelector('#addOptional');\n    if (btnaddooptional) {\n        btnaddooptional.addEventListener('click', e => {\n            e.preventDefault();\n            const courseselected = document.getElementById('selectAddCourseOptionalToLearningPlan').selectedOptions;\n            if (courseselected) {\n                const datacourses = Array.prototype.slice.call(courseselected);\n                const courseid = datacourses.map(select => select.value).join(',');\n                callAddCourse(learningplanid, null, courseid, 0, -1);\n            }\n        });\n    }\n};\n\nlet changeOptionalToRequiredAction = (learningplanid) => {\n    const addoptionalrequired = document.querySelectorAll('#addoptional_required');\n    if (addoptionalrequired) {\n        const titleconfirm = Str.get_string('titleconfirmmove', 'local_sc_learningplans');\n        const yesconfirm = Str.get_string('yesmmoveconfirm', 'local_sc_learningplans');\n        for (const add of addoptionalrequired) {\n            const coursename = add.getAttribute('cname');\n            const msgconfirm = Str.get_string('msgconfirm_mmove', 'local_sc_learningplans', { cname: coursename });\n            add.addEventListener('click', e => {\n                e.preventDefault();\n                const course_record_id = add.getAttribute('course-record-id');\n                const credits = add.getAttribute('credits') ?? -1;\n                const periodid = add.getAttribute('periodid') ?? null;\n                if (course_record_id) {\n                    const recordid = course_record_id;\n                    notification.saveCancel(titleconfirm, msgconfirm, yesconfirm, () => {\n                        callDeleteCourse(learningplanid, recordid, 0, false, credits, periodid, add.getAttribute('course-id'));\n                    });\n                }\n            });\n        }\n    }\n};\n\n\nconst callUpdateCourse = (learningid, courseorder, periodid = null, reload = true) => {\n    learningid = parseInt(learningid);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_update_required_learning_courses',\n        args: {\n            learningplan: learningid,\n            courseorder,\n            periodid\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_update_required_learning_courses', response);\n        if(reload) {\n            location.reload();\n        }\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callAddCourse = (learningid, periodid, courseid, isrequired, credits) => {\n    learningid = parseInt(learningid);\n    isrequired = parseInt(isrequired);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_save_learning_course',\n        args: {\n            learningplan: learningid,\n            periodid: periodid,\n            courseid,\n            required: isrequired,\n            credits: credits,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_save_learning_course', response);\n        location.reload();\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nconst callDeleteCourse = (\n    learningid, recordid, isrequired, notaddingcourse = true, credits = -1, periodid = null, courseid = null\n) => {\n    learningid = parseInt(learningid);\n    recordid = parseInt(recordid);\n    isrequired = parseInt(isrequired);\n    const promise = Ajax.call([{\n        methodname: 'local_sc_learningplans_delete_learning_course',\n        args: {\n            learningplan: learningid,\n            courseid: recordid,\n            required: isrequired,\n        }\n    },]);\n\n    promise[0].done(function (response) {\n        window.console.log('local_sc_learningplans_delete_learning_course', response);\n        if (notaddingcourse) {\n            location.reload();\n        }\n        else {\n            callAddCourse(learningid, periodid, courseid, 1, credits);\n        }\n\n    }).fail(function (response) {\n        window.console.error(response);\n    });\n};\n\nlet items = document.querySelectorAll('.list-courses-required');\nlet itemsPeriod = document.querySelectorAll('.tab-pane .list-courses-required-period');\nlet containercourses = document.querySelectorAll('.coursesrequired');\n\nconst updateCoursePositionAction = () => {\n    const btnupdatecourseorder = document.querySelector('#updatecourseorder');\n\n    items.forEach(function (item) {\n        item.addEventListener('dragstart', handleDragStart, false);\n        item.addEventListener('dragenter', handleDragEnter, false);\n        item.addEventListener('dragover', handleDragOver, false);\n        item.addEventListener('dragleave', handleDragLeave, false);\n        item.addEventListener('drop', handleDrop, false);\n        item.addEventListener('dragend', handleDragEnd, false);\n    });\n\n    itemsPeriod.forEach(function (item) {\n        item.addEventListener('dragstart', handleDragStart, false);\n        item.addEventListener('dragenter', handleDragEnter, false);\n        item.addEventListener('dragover', handleDragOver, false);\n        item.addEventListener('dragleave', handleDragLeave, false);\n        item.addEventListener('drop', handleDrop, false);\n        item.addEventListener('dragend', handleDragEnd, false);\n    });\n\n    containercourses.forEach(function (contelement) {\n        contelement.addEventListener('dragenter', handleDragEnter, false);\n        contelement.addEventListener('dragleave', handleDragLeave, false);\n        contelement.addEventListener('dragover', handleDragOver, false);\n        contelement.addEventListener('drop', handleDropNew, false);\n    });\n\n    if (btnupdatecourseorder) {\n        const lpid = document.querySelector(\".coursesrequired\");\n        let learningplanid = lpid.getAttribute('learningplanid');\n        btnupdatecourseorder.addEventListener('click', e => {\n            e.preventDefault();\n            clickUpdateCourses(learningplanid);\n        });\n    }\n\n    const btnupdatecourseperiodorder = document.querySelectorAll('#courseOrderInPeriod');\n    for (const btnupdate of btnupdatecourseperiodorder) {\n        btnupdate.addEventListener('click', e => {\n            e.preventDefault();\n            let periodid = btnupdate.attributes.periodid.value;\n            let lpid = btnupdate.attributes.lpid.value;\n            clickUpdateCoursePeriod(lpid, periodid);\n        });\n    }\n};\n\nconst clickUpdateCoursePeriod = (lpid, periodid, reload) => {\n    const itemsPeriod = document.querySelectorAll(`li[lpid=\"${lpid}\"][periodid=\"${periodid}\"]`);\n    const courseData = [];\n    itemsPeriod.forEach(function (item) {\n        let listRecordID = item.attributes.datacourse.value;\n        let listCoursePosition = item.attributes.poscourse.value;\n        let listCourseID = item.attributes.courseid.value;\n        courseData.push({\n            recordid: listRecordID.replace('courses[', '').replace(']', ''),\n            position: listCoursePosition,\n            courseid: listCourseID,\n        });\n    });\n    const coursePosition = [];\n    courseData.forEach((index) => {\n        coursePosition.push({\n            recordid: index.recordid,\n            courseid: index.courseid,\n            position: index.position,\n            periodid: index.periodid\n        });\n    });\n    callUpdateCourse(lpid, coursePosition, periodid, reload);\n};\n\nconst clickUpdateCourses = (learningplanid) => {\n    const courseData = [];\n    items.forEach(function (item) {\n        let listRecordID = item.attributes.datacourse.value;\n        let listCoursePosition = item.attributes.poscourse.value;\n        let listCourseID = item.attributes.courseid.value;\n        courseData.push({\n            recordid: listRecordID.replace('courses[', '').replace(']', ''),\n            position: listCoursePosition,\n            courseid: listCourseID,\n        });\n    });\n\n    const coursePosition = [];\n    courseData.forEach((index) => {\n        coursePosition.push({\n            recordid: index.recordid,\n            courseid: index.courseid,\n            position: index.position,\n            periodid: index.periodid\n        });\n    });\n    callUpdateCourse(learningplanid, coursePosition);\n};\n\nvar dragSrcEl = null;\n\n/**\n *\n * @param {*} e\n */\nfunction handleDragStart(e) {\n    this.style.opacity = '0.4';\n\n    dragSrcEl = this;\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/html', this.innerHTML);\n}\n\n/**\n *\n * @param {*} e\n */\nfunction handleDragOver(e) {\n    if (e.preventDefault) {\n        e.preventDefault();\n    }\n\n    e.dataTransfer.dropEffect = 'move';\n\n    return false;\n}\n\n/**\n *\n */\nfunction handleDragEnter() {\n    this.classList.add('over');\n}\n\n/**\n *\n */\nfunction handleDragLeave() {\n    this.classList.remove('over');\n}\n\n/**\n *\n * @param {*} e\n */\nfunction handleDrop(e) {\n    if (e.stopPropagation) {\n        e.stopPropagation(); // stops the browser from redirecting.\n    }\n    if (dragSrcEl != this) {\n        dragSrcEl.innerHTML = this.innerHTML;\n        this.innerHTML = e.dataTransfer.getData('text/html');\n\n        let itemToReplaceAttr = this.attributes[\"datacourse\"].value;\n        let itemToReplaceCourseAttr = this.attributes[\"courseid\"].value;\n        let draggedItemAttr = dragSrcEl.attributes[\"datacourse\"].value;\n        let draggedItemCourseAttr = dragSrcEl.attributes[\"courseid\"].value;\n        this.setAttribute(\"datacourse\", draggedItemAttr);\n        this.setAttribute(\"courseid\", draggedItemCourseAttr);\n        dragSrcEl.setAttribute(\"datacourse\", itemToReplaceAttr);\n        dragSrcEl.setAttribute(\"courseid\", itemToReplaceCourseAttr);\n        const lpid = document.querySelector(\".coursesrequired\");\n        let learningplanid = lpid.getAttribute('learningplanid');\n        let havePeriod = dragSrcEl.attributes['periodid']?.value;\n        if (havePeriod) {\n            const allPeriodsRequired = document.querySelectorAll('.coursesrequired');\n            allPeriodsRequired.forEach(el => {\n                const periodid = el.getAttribute('record-periodid');\n                window.console.log(periodid);\n                clickUpdateCoursePeriod(learningplanid, periodid, false);\n            });\n        } else {\n            clickUpdateCourses(learningplanid);\n        }\n        window.console.log(learningplanid, havePeriod,\n            'Cambiando los cursos draggedItemAttr: ',\n            draggedItemAttr, 'itemToReplaceAttr', itemToReplaceAttr);\n    }\n\n    return false;\n}\n\n/**\n *\n * @param {*} e\n */\nfunction handleDropNew(e) {\n    if (e.stopPropagation) {\n        e.stopPropagation(); // stops the browser from redirecting.\n    }\n    const dragParent = dragSrcEl.parentElement;\n    if (dragParent != e.target) {\n        e.target.append(dragSrcEl);\n    }\n    return false;\n}\n\n/**\n *\n */\nfunction handleDragEnd() {\n    this.style.opacity = '1';\n    items.forEach(function (item) {\n        item.classList.remove('over');\n    });\n    containercourses.forEach(function (item) {\n        item.classList.remove('over');\n    });\n}"],"names":["learningplanid","deleteCourseAction","addCoursePeriodAction","addRequiredAction","addOptionalAction","changeOptionalToRequiredAction","updateCoursePositionAction","actionAddCourseRelations","document","querySelectorAll","forEach","element","addEventListener","recordid","getAttribute","window","lastRecordId","callGetPossibleRelations","closerelation","querySelector","modal","getElementById","classList","remove","style","display","addrelation","select","selectedOptions","selectedValues","i","length","push","value","records","join","getToRemove","callRemoveRelations","callAddRelations","Ajax","call","methodname","args","done","response","console","log","location","reload","fail","error","parseInt","promise","selectCourses","innerHTML","dataCourses","courses","current","newElement","createElement","append","coursename","add","deleteBtns","titleconfirm","Str","get_string","msgconfirm","yesconfirm","el","e","preventDefault","course_record_id","isrequired","notification","saveCancel","callDeleteCourse","btnaddcourses","courseselected","periodselected","checked","courseid","Array","prototype","slice","map","callAddCourse","btnaddrequired","btnaddooptional","addoptionalrequired","cname","credits","periodid","callUpdateCourse","learningid","courseorder","learningplan","required","notaddingcourse","items","itemsPeriod","containercourses","btnupdatecourseorder","item","handleDragStart","handleDragEnter","handleDragOver","handleDragLeave","handleDrop","handleDragEnd","contelement","handleDropNew","clickUpdateCourses","btnupdate","attributes","lpid","clickUpdateCoursePeriod","courseData","listRecordID","datacourse","listCoursePosition","poscourse","listCourseID","replace","position","coursePosition","index","dragSrcEl","opacity","this","dataTransfer","effectAllowed","setData","dropEffect","stopPropagation","getData","itemToReplaceAttr","itemToReplaceCourseAttr","draggedItemAttr","draggedItemCourseAttr","setAttribute","havePeriod","_dragSrcEl$attributes","parentElement","target"],"mappings":"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"}